<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
  <title>统计分析</title>
  <script src="../js/polyfill.min.js"></script>
  <script src="../js/axios.min.js"></script>
  <script src="../api/api.js"></script>
  <script src="../api/apiConfig.js"></script>
  <script src="../api/apiHttp.js"></script>
  <script src="../js/mui.min.js"></script>
  <link href="../css/reset.css" rel="stylesheet" />
  <link href="../css/mui.min.css" rel="stylesheet" />
  <link href="../css/weui.min.css" rel="stylesheet" />
  <link href="../css/style.min.css" rel="stylesheet" />
  <script src="../js/vue.js"></script>
  <script src="../js/openWindow.js"></script>
  <script src="../js/echarts.min.js"></script>
  <script src="../js/index.min.js"></script>
  <script type="text/javascript" charset="utf-8">
    document.documentElement.style.fontSize = document.documentElement.clientWidth / 10.8 + 'px';
  </script>
  <style type="text/css">
    .container {
      position: relative;
      top: 3rem;
    }

    .swiperArea {
      width: 100%;
      margin-top: 0.5rem;

    }

    .swiper_title {
      font-size: 0.3rem;
      font-weight: bold;
      padding: 0.2rem;
    }
    .noData {
      position: fixed;
      top: 3rem;
      width: 100%;
      text-align: center;
      white-space: nowrap;

    }
  </style>
</head>

<body ontouchstart>
  <div id="detail">
    <c-header :title="title">
    </c-header>
    <div class="container">
      <ve-pie :data="chartData" :settings="chartSetting"></ve-pie>
    </div>
    <span v-if="chartData.rows.length < 1" class="noData">暂无数据显示</span>
  </div>
</body>


<script src="../components/cHeader.js"></script>
<script>
  new Vue({
    el: '#detail',
    data: {
      chartSetting: {
        dataType: '',
      },
      selected: -1,
      title: infoGet('companyName') || '默认',
      infoData: {
        org: '城市综合管理局',
        response: '陈二',
        moblie: '13526984523',
      },
      submitForm: {
        companyId: infoGet('companyId'),
        type: 1, // 1根据样式统计 2根据规格统计
      },
      chartData: {
        columns: ['ad_type', 'num'],
        rows: [
          // {
          //   'ad_type': '1月1日',
          //   'num': 123
          // },
          // {
          //   'ad_type': '1月2日',
          //   'num': 1223
          // },
          // {
          //   'ad_type': '1月3日',
          //   'num': 2123
          // },
          // {
          //   'ad_type': '1月4日',
          //   'num': 4123
          // },
          // {
          //   'ad_type': '1月5日',
          //   'num': 3123
          // },
          // {
          //   'ad_type': '1月6日',
          //   'num': 7123
          // }
        ]
      },
    },
    created: function () {
      this.adStatistics();
    },
    methods: {
      adStatistics() {
        var self = this;
        pm(api.adStatistics, self.submitForm, res => {
          var temp = res.result;
          temp.forEach(ele => {
            switch (ele.ad_type) {
              case 1:
                ele.ad_type = '普通';
                break;
              case 2:
                ele.ad_type = 'T型';
                break;
              case 3:
                ele.ad_type = '灯箱';
                break;
              case 4:
                ele.ad_type = '宣传栏';
                break;
            }
          });
          self.chartData.rows = temp;
        }, err => {
          console.log(err);
        })
      },
    },
  })
</script>

</html>